<div class="main">
  <div class="jobs-container">
    <div class="filters-container">
      <%= render 'shared/filters' %>
    </div>

    <ul class=job-listings>
      <div id="jobs-found-container">
        <h3 class="jobs-found">We have found <span class="jobs-count"></span> jobs</h3>
      </div>

      <% @jobs.each do |job| %>
        <li class="js-job job js-<%= job.posted_date_range %>">
          <div class="job-details-container">
            <div class="job-left">
              <a class="url" href=<%= job.job_link %>>
                <span class="title second-title"><%= job.title %></span><span class="<%= job.status %>-job">(<%= job.status %>)</span>
              </a>
              <span class="company"><%= job.company %></span>
              <span class="source"><span class="source-title">Source:</span><%= job.source %></span>
              <span class="job-board"><span class="job-board-title">Job Board:</span> <%= job.location %></span>
              <div class="tags-container">
                <% if job.requires_experience? %>
                  <div class="requires-experience tag js-experience-job-tag">Asks for experience</div>
                <% end %>

                <% if job.requires_stem_degree? %>
                  <div class="requires-stem-degree tag js-stem-degree-job-tag">Asks for STEM Degree</div>
                <% end %>

                <div class="location non-filter-tag"><%= job.location %></div>
                <div class="posted-date non-filter-tag"><%= job.posted_days_ago %></div>
              </div>
              <div class="tag-filters-container">
                <% job.tag_list.each do |tag| %>
                  <% if filter_tag?(tag) && !job.white_listed? %>
                    <div class="filter-reason">
                      Filter tag: <%= tag %>
                    </div>
                  <% end %>
                <% end %>
                <% if job.white_listed? %>
                    <div class="filter-reason-green">
                      Filter tag: Whitelisted
                    </div>
                <% end %>
                <% if job.marked_as_approved? %>
                  <div class="filter-reason-green">
                    Filter tag: Marked as approved
                  </div>
                <% end %>
              </div>

              <% if job.rejected? %>
                <%= link_to job_path(job, job: {status: 'approved', id: job.id}), method: 'patch', id: "status-for-#{job.id}", class: "js-status-update", remote: true  do%>
                  <span class="update-status-approve">
                    Mark as approved
                  </span>
                <% end %>
              <% end %>
            </div>
          </div>
        </li>
      <% end %>
    </ul>
  </div>
</div>

<%= javascript_pack_tag 'jobs_viewer' %>
